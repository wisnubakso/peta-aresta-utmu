<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Metadata -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!-- Judul pada tab browser -->
    <title>Peta Aresta PT. UTMU</title>

    <!-- Leaflet CSS Library -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Google Font -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
    />

    <!-- Style untuk tampilan peta fullscreen -->
    <style>
      /* style umum */
      html,
      body,
      #map {
        height: 100%;
        width: 100%;
        margin: 0px;
        font-family: "Roboto", sans-serif;
      }
      /* style popup */
      .popup-content {
        font-family: "Roboto", sans-serif;
        font-size: 14px;
      }
      /* style label */
      .styleLabel {
        background: rgba(255, 255, 255, 0);
        border: 10;
        border-radius: 0px;
        box-shadow: 0 0px 0px;
        font-size: 10pt;
        color: black;
        text-shadow: 2px 2px 5px white;
      }
      /* style judul peta */
      .info {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255, 255, 255, 0.8);
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        border-radius: 5px;
      }
      .info h2 {
        margin: 0 0 5px;
        color: #777;
      }
      /* Navbar Style */
      html,
      body,
      #container {
        height: 100%;
        width: 100%;
        overflow: hidden;
      }
      body {
        padding-top: 50px;
      }
      #map {
        width: auto;
        height: 100%;
      }
      .navbar {
        border-color: #bbb;
      }
      .navbar-brand {
        font-weight: bold;
      }
      .white {
        color: #fff;
      }
    </style>
  </head>

  <body>
    <!-- Leaflet JavaScript Library -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- library jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Leaflet Label JS Library -->
    <script src="https://unpkg.com/rbush@2.0.2/rbush.min.js"></script>
    <script src="https://unpkg.com/labelgun@6.1.0/lib/labelgun.min.js"></script>
    <script src="plugin/label/leaflet-labels.js"></script>

    <!-- Bootstrap CSS Library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

    <!-- Bootstrap JS Library -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

    <!-- Mouse Position CSS Library -->
    <link
      rel="stylesheet"
      href="plugin/mouse-position/L.Control.MousePosition.css"
    />

    <!-- Mouse Position JS Library -->
    <script src="plugin/mouse-position/L.Control.MousePosition.js"></script>

    <!-- Font Awesome CSS Library -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />

    <!-- Geolocation CSS Library -->
    <link
      rel="stylesheet"
      href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.css"
    />

    <!-- Geolocation Javascript Library -->
    <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.min.js"></script>

    <!-- Measurement CSS Library -->
    <link rel="stylesheet" href="plugin/leaflet-measure/leaflet-measure.css" />

    <!-- Measurement JS Library -->
    <script src="plugin/leaflet-measure/leaflet-measure.js"></script>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#"
          ><i class="fa-solid fa-map"></i> Peta Areal Statement PT. UTMU</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <!-- Item 1 -->
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="https://github.com/wisnubakso/"
                ><i class="fa-brands fa-github"></i> GitHub</a
              >
            </li>
            <!-- Item 2 -->
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#infoModal"
                ><i class="fa-solid fa-circle-info"></i> Info</a
              >
            </li>
            <!-- Item 3 -->
            <!-- <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
              </a> -->
              <!-- Dropdown -->
              <!-- <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </li> -->
            <!-- Item 4 -->
            <!-- <li class="nav-item">
              <a class="nav-link disabled" aria-disabled="true">Disabled</a>
            </li>
          </ul> -->
          <!-- Search Bar -->
          <!-- <form class="d-flex" role="search">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
            </button>
          </form> -->
        </div>
      </div>
    </nav>

        <!-- Navbar Info Modal -->
        <div
        class="modal fade"
        id="infoModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Info</h1>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">Dibuat sebagai percobaan untuk PT. UTMU</div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
                <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
              </div>
            </div>
          </div>
      </div>

    <div id="container">
      <div id="map"></div>
    </div>

    <!-- HTML Block untuk menampilkan peta -->
    <div id="map"></div>
    <script>
      /* Initial Map */
      var map = L.map("map").setView([1.217396, 118.263384], 13); //lat, long, zoom

      /* Tile Basemap */
      var OSM_Base = L.tileLayer(
        "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
        {
          //attribution akan muncul di pojok kanan bawah
          attribution:
            '<a href="https://www.openstreetmap.org/copyright" target="_blank">Open Street Map</a> | <a href="https://www.ptwita.com/" target="_blank">GIS-UTMU@2024</a>',
        }
      );
      var Esri_WorldImagery = L.tileLayer(
        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
        {
          attribution:
            '<a href="https://www.esri.com/en-us/home" target="_blank">ESRI Imagery</a> | <a href="https://www.ptwita.com/" target="_blank">GIS-UTMU@2024</a>',
        }
      );
      var Esri_WorldShadedRelief = L.tileLayer(
        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",
        {
          attribution:
            '<a href="https://www.esri.com/en-us/home" target="_blank">ESRI Shaded Relief</a> | <a href="https://www.ptwita.com/" target="_blank">GIS-UTMU@2024</a>',
          maxZoom: 13,
        }
      );
      OSM_Base.addTo(map); //Memanggil basemap untuk ditampilkan ketika halaman dipanggil

      map.createPane("PANE_HGU");
      map.getPane("PANE_HGU").style.zIndex = 300;
      map.createPane("PANE_KADASTRAL_INTI");
      map.getPane("PANE_KADASTRAL_INTI").style.zIndex = 301;
      map.createPane("PANE_KADASTRAL_PLASMA");
      map.getPane("PANE_KADASTRAL_PLASMA").style.zIndex = 301;
      map.createPane("PANE_KKPR");
      map.getPane("PANE_KKPR").style.zIndex = 300;
      map.createPane("PANE_MASTER_BLOK");
      map.getPane("PANE_MASTER_BLOK").style.zIndex = 302;
      map.createPane("PANE_JALAN");
      map.getPane("PANE_JALAN").style.zIndex = 401;

      /* Fungsi untuk menampilkan popup */
      function showPopup(e, content) {
        var popup = L.popup({
          closeButton: false,
          autoClose: false,
          className: "popup-content",
        })
          .setLatLng(e.latlng)<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Metadata -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!-- Judul pada tab browser -->
    <title>Peta Aresta PT. UTMU</title>

    <!-- Leaflet CSS Library -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Google Font -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
    />

    <!-- Style untuk tampilan peta fullscreen -->
    <style>
      /* style umum */
      html,
      body,
      #map {
        height: 100%;
        width: 100%;
        margin: 0px;
        font-family: "Roboto", sans-serif;
      }
      /* style popup */
      .popup-content {
        font-family: "Roboto", sans-serif;
        font-size: 14px;
      }
      /* style label */
      .styleLabel {
        background: rgba(255, 255, 255, 0);
        border: 10;
        border-radius: 0px;
        box-shadow: 0 0px 0px;
        font-size: 10pt;
        color: black;
        text-shadow: 2px 2px 5px white;
      }
      /* style judul peta */
      .info {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255, 255, 255, 0.8);
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        border-radius: 5px;
      }
      .info h2 {
        margin: 0 0 5px;
        color: #777;
      }
      /* Navbar Style */
      html,
      body,
      #container {
        height: 100%;
        width: 100%;
        overflow: hidden;
      }
      body {
        padding-top: 50px;
      }
      #map {
        width: auto;
        height: 100%;
      }
      .navbar {
        border-color: #bbb;
      }
      .navbar-brand {
        font-weight: bold;
      }
      .white {
        color: #fff;
      }
    </style>
  </head>

  <body>
    <!-- Leaflet JavaScript Library -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- library jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Leaflet Label JS Library -->
    <script src="https://unpkg.com/rbush@2.0.2/rbush.min.js"></script>
    <script src="https://unpkg.com/labelgun@6.1.0/lib/labelgun.min.js"></script>
    <script src="plugin/label/leaflet-labels.js"></script>

    <!-- Bootstrap CSS Library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

    <!-- Bootstrap JS Library -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

    <!-- Mouse Position CSS Library -->
    <link
      rel="stylesheet"
      href="plugin/mouse-position/L.Control.MousePosition.css"
    />

    <!-- Mouse Position JS Library -->
    <script src="plugin/mouse-position/L.Control.MousePosition.js"></script>

    <!-- Font Awesome CSS Library -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />

    <!-- Geolocation CSS Library -->
    <link
      rel="stylesheet"
      href="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.css"
    />

    <!-- Geolocation Javascript Library -->
    <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-locatecontrol/v0.43.0/L.Control.Locate.min.js"></script>

    <!-- Measurement CSS Library -->
    <link rel="stylesheet" href="plugin/leaflet-measure/leaflet-measure.css" />

    <!-- Measurement JS Library -->
    <script src="plugin/leaflet-measure/leaflet-measure.js"></script>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#"
          ><i class="fa-solid fa-map"></i> Peta Areal Statement PT. UTMU</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <!-- Item 1 -->
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="https://github.com/wisnubakso/"
                ><i class="fa-brands fa-github"></i> GitHub</a
              >
            </li>
            <!-- Item 2 -->
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#infoModal"
                ><i class="fa-solid fa-circle-info"></i> Info</a
              >
            </li>
            <!-- Item 3 -->
            <!-- <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
              </a> -->
              <!-- Dropdown -->
              <!-- <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item" href="#">Something else here</a>
                </li>
              </ul>
            </li> -->
            <!-- Item 4 -->
            <!-- <li class="nav-item">
              <a class="nav-link disabled" aria-disabled="true">Disabled</a>
            </li>
          </ul> -->
          <!-- Search Bar -->
          <!-- <form class="d-flex" role="search">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
            </button>
          </form> -->
        </div>
      </div>
    </nav>

        <!-- Navbar Info Modal -->
        <div
        class="modal fade"
        id="infoModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Info</h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">Dibuat sebagai percobaan untuk PT. UTMU</div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
              <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
            </div>
          </div>
        </div>
      </div>

    <div id="container">
      <div id="map"></div>
    </div>

    <!-- HTML Block untuk menampilkan peta -->
    <div id="map"></div>
    <script>
      /* Initial Map */
      var map = L.map("map").setView([1.217396, 118.263384], 13); //lat, long, zoom

      /* Tile Basemap */
      var OSM_Base = L.tileLayer(
        "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
        {
          //attribution akan muncul di pojok kanan bawah
          attribution:
            '<a href="https://www.openstreetmap.org/copyright" target="_blank">Open Street Map</a> | <a href="https://www.ptwita.com/" target="_blank">GIS-UTMU@2024</a>',
        }
      );
      var Esri_WorldImagery = L.tileLayer(
        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
        {
          attribution:
            '<a href="https://www.esri.com/en-us/home" target="_blank">ESRI Imagery</a> | <a href="https://www.ptwita.com/" target="_blank">GIS-UTMU@2024</a>',
        }
      );
      var Esri_WorldShadedRelief = L.tileLayer(
        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",
        {
          attribution:
            '<a href="https://www.esri.com/en-us/home" target="_blank">ESRI Shaded Relief</a> | <a href="https://www.ptwita.com/" target="_blank">GIS-UTMU@2024</a>',
          maxZoom: 13,
        }
      );
      OSM_Base.addTo(map); //Memanggil basemap untuk ditampilkan ketika halaman dipanggil

      map.createPane("PANE_HGU");
      map.getPane("PANE_HGU").style.zIndex = 300;
      map.createPane("PANE_KADASTRAL_INTI");
      map.getPane("PANE_KADASTRAL_INTI").style.zIndex = 301;
      map.createPane("PANE_KADASTRAL_PLASMA");
      map.getPane("PANE_KADASTRAL_PLASMA").style.zIndex = 301;
      map.createPane("PANE_KKPR");
      map.getPane("PANE_KKPR").style.zIndex = 300;
      map.createPane("PANE_MASTER_BLOK");
      map.getPane("PANE_MASTER_BLOK").style.zIndex = 302;
      map.createPane("PANE_JALAN");
      map.getPane("PANE_JALAN").style.zIndex = 401;

      /* Fungsi untuk menampilkan popup */
      function showPopup(e, content) {
        var popup = L.popup({
          closeButton: false,
          autoClose: false,
          className: "popup-content",
        })
          .setLatLng(e.latlng)
          .setContent(content)
          .openOn(map);
        return popup;
      }

      /* HGU */
      var HGU_UTMU = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_HGU",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: "transparent", //Warna tengah polygon
            fillOpacity: 0.7, //Transparansi tengah polygon
            color: "blue", //Warna garis tepi polygon
            weight: 3, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>NIB : </b>" +
                "<b>" +
                feature.properties.NIB +
                "</b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              HGU_UTMU.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Nomor SK : </td><td>" +
                feature.properties.No_SK +
                "</td></tr>" +
                "<tr><td>Luas Dokumen : </td><td>" +
                feature.properties.Luas_Doc +
                " Ha </td></tr>" +
                "<tr><td>Luas Pengukuran : </td><td>" +
                feature.properties.Luas_Ha +
                " Ha </td></tr>" +
                "<table>";
              HGU_UTMU.bindPopup(
                "<p><b>NIB :</b> " +
                  "<b>" +
                  feature.properties.NIB +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      
      /* memanggil data HGU */
      $.getJSON("geojson/FINAL_HGU.geojson", function (data) {
        HGU_UTMU.addData(data);
        // map.addLayer(HGU_UTMU); //HGU_UTMU ditampilkan ketika halaman dipanggil
      });

      /* KADASTRAL INTI */
      var KADASTRAL_INTI = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_KADASTRAL_INTI",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: "transparent", //Warna tengah polygon
            fillOpacity: 0.7, //Transparansi tengah polygon
            color: "#FE9929", //Warna garis tepi polygon
            weight: 3, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>NIB : </b>" +
                "<b>" +
                feature.properties.NIB +
                "</b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              KADASTRAL_INTI.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Nomor SK : </td><td>" +
                feature.properties.No_SK +
                "</td></tr>" +
                "<tr><td>Luas Dokumen : </td><td>" +
                feature.properties.Luas_Doc +
                " Ha </td></tr>" +
                "<tr><td>Luas Pengukuran : </td><td>" +
                feature.properties.Luas_Ha +
                " Ha </td></tr>" +
                "<table>";
              KADASTRAL_INTI.bindPopup(
                "<p><b>NIB :</b> " +
                  "<b>" +
                  feature.properties.NIB +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      /* memanggil data KADASTRAL INTI */
      $.getJSON("geojson/FINAL_KADASTRAL_INTI.geojson", function (data) {
        KADASTRAL_INTI.addData(data);
        // map.addLayer(KADASTRAL_INTI); //KADASTRAL_INTI ditampilkan ketika halaman dipanggil
      });

      /* KADASTRAL PLASMA */
      var KADASTRAL_PLASMA = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_KADASTRAL_PLASMA",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: "transparent", //Warna tengah polygon
            fillOpacity: 0.7, //Transparansi tengah polygon
            color: "#FEE391", //Warna garis tepi polygon
            weight: 3, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>NIB : </b>" +
                "<b>" +
                feature.properties.NIB +
                "</b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              KADASTRAL_PLASMA.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Nomor SK : </td><td>" +
                feature.properties.No_SK +
                "</td></tr>" +
                "<tr><td>Luas Dokumen : </td><td>" +
                feature.properties.Luas_Doc +
                " Ha </td></tr>" +
                "<tr><td>Luas Pengukuran : </td><td>" +
                feature.properties.Luas_Ha +
                " Ha </td></tr>" +
                "<table>";
              KADASTRAL_PLASMA.bindPopup(
                "<p><b>NIB :</b> " +
                  "<b>" +
                  feature.properties.NIB +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      /* memanggil data KADASTRAL PLASMA */
      $.getJSON("geojson/FINAL_KADASTRAL_PLASMA.geojson", function (data) {
        KADASTRAL_PLASMA.addData(data);
        // map.addLayer(KADASTRAL_PLASMA); //KADASTRAL_PLASMA ditampilkan ketika halaman dipanggil
      });

      /* KKPR */
      var KKPR = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_KKPR",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: "transparent", //Warna tengah polygon
            fillOpacity: 0.7, //Transparansi tengah polygon
            color: "#000", //Warna garis tepi polygon
            weight: 3, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>NIB : </b>" +
                "<b>" +
                feature.properties.NIB +
                "</b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              KKPR.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Nomor SK : </td><td>" +
                feature.properties.No_SK +
                "</td></tr>" +
                "<tr><td>Luas Dokumen : </td><td>" +
                feature.properties.Luas_Doc +
                " Ha </td></tr>" +
                "<tr><td>Luas Pengukuran : </td><td>" +
                feature.properties.Luas_Ha +
                " Ha </td></tr>" +
                "<table>";
              KKPR.bindPopup(
                "<p><b>NIB :</b> " +
                  "<b>" +
                  feature.properties.NIB +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      /* memanggil data KKPR */
      $.getJSON("geojson/FINAL_KKPR.geojson", function (data) {
        KKPR.addData(data);
        // map.addLayer(KKPR); //KKPR ditampilkan ketika halaman dipanggil
      });

      /* MASTER_BLOK */
      var BlockColors = {
        2012: "#a6cee3",
        2013: "#1f78b4",
        2014: "#b2df8a",
        2015: "#33a02c",
        2016: "#fb9a99",
        2017: "#e31a1c",
        2018: "#fdbf6f",
        2019: "#ff7f00",
        2020: "#cab2d6",
        2021: "#6a3d9a",
        2022: "#ffff99",
        2023: "#b15928",
        2024: "#8dd3c7",
        2025: "#ffffb3",
        2026: "#bebada",
        2027: "#fb8072",
        2028: "#80b1d3",
        2029: "#fdb462",
        2030: "#b3de69",
        2031: "#fccde5",
        2032: "#d9d9d9",
        2033: "#bc80bd",
        2034: "#ccebc5",
        2035: "#ffed6f",
      };
      var MASTER_BLOK = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_MASTER_BLOK",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: BlockColors[feature.properties.t_tanam], //Warna tengah polygon
            fillOpacity: 0.4, //Transparansi tengah polygon
            color: "#000", //Warna garis tepi polygon
            weight: 0, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>Blok : </b>" +
                "<b>" +
                feature.properties.Blok +
                "<b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              MASTER_BLOK.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Konsesi : </td><td>" +
                feature.properties.Konsesi +
                "</td></tr>" +
                "<tr><td>Alokasi : </td><td>" +
                feature.properties.Alokasi +
                "</td></tr>" +
                "<tr><td>Estate : </td><td>" +
                feature.properties.Estate +
                "</td></tr>" +
                "<tr><td>Divisi : </td><td>" +
                feature.properties.Divisi +
                "</td></tr>" +
                "<tr><td>Blok : </td><td>" +
                feature.properties.Blok +
                "</td></tr>" +
                "<tr><td>Tahun Tanam : </td><td>" +
                feature.properties.t_tanam +
                "</td></tr>" +
                "<tr><td>Status Tanam : </td><td>" +
                feature.properties.periode +
                "</td></tr>" +
                "<tr><td>Luas LC Real : </td><td>" +
                feature.properties.luas_real +
                " Ha </td></tr>" +
                "<tr><td>Luas LC Dokumen BAP : </td><td>" +
                feature.properties.luas +
                " Ha </td></tr>" +
                "<tr><td>Luas Tanam : </td><td>" +
                feature.properties.lpl_disp +
                " Ha </td></tr>" +
                "<tr><td>Luas Tanam Mekanis: </td><td>" +
                feature.properties.lpl_me_d +
                " Ha </td></tr>" +
                "<tr><td>Luas Tanam Manual: </td><td>" +
                feature.properties.lpl_nm_d +
                " Ha </td></tr>" +
                "<tr><td>Jumlah Pokok: </td><td>" +
                feature.properties.j_pokok +
                " Pokok </td></tr>" +
                "<tr><td>Jumlah Pokok Mekanisasi: </td><td>" +
                feature.properties.j_pokok_me +
                " Pokok </td></tr>" +
                "<tr><td>Jumlah Pokok Manual: </td><td>" +
                feature.properties.j_pokok_nm +
                " Pokok </td></tr>" +
                "<table>";
              MASTER_BLOK.bindPopup(
                "<p><b>Blok :</b> " +
                  "<b>" +
                  feature.properties.Blok +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
          // // Labeling
          // layer.bindTooltip(layer.feature.properties.Blok.toString(), {
          //   direction: "center",
          //   permanent: true,
          //   className: "styleLabel",
          // });
        },
      });
      /* memanggil data MASTER_BLOK */
      $.getJSON("geojson/FINAL_BLOK_ARESTA.geojson", function (data) {
        MASTER_BLOK.addData(data);
        map.addLayer(MASTER_BLOK); //MASTER_BLOK ditampilkan ketika halaman dipanggil
      });
      // //Reset labels//
      // resetLabels([MASTER_BLOK]);
      // map.on("move", function () {
      //   resetLabels([MASTER_BLOK]);
      // });
      // map.on("zoomend", function () {
      //   resetLabels([MASTER_BLOK]);
      // });
      // map.on("layeradd", function () {
      //   resetLabels([MASTER_BLOK]);
      // });
      // map.on("layerremove", function () {
      //   resetLabels([MASTER_BLOK]);
      // });

      /* Jalan */
      var RoadColors = {
        AR: "#996633",
        MR: "#ff0000",
        CR: "#ff9900",
        RR: "#800000",
        BR: "#808080",
      };
      var JALAN = L.geoJson(null, {
        /* Style polyline */
        pane: "PANE_JALAN",
        style: function (feature) {
          //Fungsi style polyline
          return {
            color: RoadColors[feature.properties.Road_Class], //Warna garis
            weight: 2, //Tebal garis
            opacity: 1, //Transparansi garis
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis
                color: "#00FFFF", //Warna garis
                opacity: 1, //Transparansi garis
              });
              var content =
                "<p><b>Kelas Jalan : </b>" +
                "<b>" +
                feature.properties.Road_Class +
                "<b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              JALAN.resetStyle(e.target); //Mengembalikan style garis ke style awal
              map.closePopup(); //Menutup popup
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Konsesi : </td><td>" +
                feature.properties.Konsesi +
                "</td></tr>" +
                "<tr><td>Alokasi : </td><td>" +
                feature.properties.Alokasi +
                "</td></tr>" +
                "<tr><td>Estate : </td><td>" +
                feature.properties.Estate +
                "</td></tr>" +
                "<tr><td>Divisi : </td><td>" +
                feature.properties.Divisi +
                "</td></tr>" +
                "<tr><td>Blok : </td><td>" +
                feature.properties.Blok +
                "</td></tr>" +
                "<tr><td>Panjang Jalan: </td><td>" +
                feature.properties.Panjang_M +
                " m </td></tr>" +
                "<table>";
              JALAN.bindPopup(
                "<p><b>Blok : </b>" +
                  "<b>" +
                  feature.properties.Blok +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      /* memanggil data geojson polyline */
      $.getJSON("geojson/FINAL_JALAN.geojson", function (data) {
        JALAN.addData(data);
        map.addLayer(JALAN); //JALAN ditampilkan ketika halaman dipanggil
      });

      /* Judul Peta */
      var title = new L.Control();
      title.onAdd = function (map) {
        this._div = L.DomUtil.create("div", "info");
        this.update();
        return this._div;
      };
      title.update = function () {
        this._div.innerHTML = "<h2>Peta Areal Statement</h2>PT. UTMU";
      };
      title.addTo(map);

      /* Control Layer */
      var baseMaps = {
        //list basemap
        "Open Street Map": OSM_Base,
        "ESRI Imagery": Esri_WorldImagery,
        "ESRI Shaded Relief": Esri_WorldShadedRelief,
      };
      var Layers = {
        //list layer
        "Hak Guna Usaha": HGU_UTMU,
        "KKPR / Izin Lokasi": KKPR,
        "Panitia B / Kadastral Inti": KADASTRAL_INTI,
        "Panitia B / Kadastral Plasma": KADASTRAL_PLASMA,
        "Master Blok": MASTER_BLOK,
        Jalan: JALAN,
      };
      var layerControl = L.control.layers(baseMaps, Layers, {
        collapsed: true, //collapse layer control
      });
      layerControl.addTo(map);

      /* Cursor's Coordinate */
      L.control
        .mousePosition({
          separator: ",",
          prefix: "Koordinat : ",
        })
        .addTo(map);

      /* Scale Bar */
      L.control
        .scale({
          maxWidth: 150,
          imperial: false,
        })
        .addTo(map);

      /* Watermark Logo */
      L.Control.Watermark = L.Control.extend({
        onAdd: function (map) {
          var img = L.DomUtil.create("img");
          img.src = "asset/logo/LOGO_UTMU.png"; //Image URL
          img.style.width = "50px"; //Image Size
          return img;
        },
        onRemove: function (map) {
          // Nothing to do here
        },
      });
      L.control.watermark = function (opts) {
        return new L.Control.Watermark(opts);
      };
      L.control.watermark({ position: "bottomright" }).addTo(map);

      /* Geolocation Positioning */
      var locateControl = L.control
        .locate({
          position: "topleft",
          drawCircle: true,
          follow: true,
          setView: true,
          keepCurrentZoomLevel: false,
          markerStyle: {
            weight: 1,
            opacity: 0.8,
            fillOpacity: 0.8,
          },
          circleStyle: {
            weight: 1,
            clickable: false,
          },
          icon: "fa fa-crosshairs",
          metric: true,
          strings: {
            title: "Klik untuk mengetahui lokasimu",
            popup: "Lokasimu sekarang di sini. Akurasi {distance} {unit}",
            outsideMapBoundsMsg: "Kamu berada di luar area peta",
          },
          locateOptions: {
            maxZoom: 15,
            watch: true,
            enableHighAccuracy: true,
            maximumAge: 10000,
            timeout: 10000,
          },
        })
        .addTo(map);

      /* Measurement */
      var measureControl = new L.Control.Measure({
        primaryLengthUnit: "meters",
        secondaryLengthUnit: "kilometers",
        primaryAreaUnit: "hectares",
        secondaryAreaUnit: "sqmeters",
        activeColor: "green",
        completedColor: "blue",
      });
      measureControl.addTo(map);
    </script>
  </body>
</html>

          .setContent(content)
          .openOn(map);
        return popup;
      }

      /* HGU */
      var HGU_UTMU = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_HGU",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: "transparent", //Warna tengah polygon
            fillOpacity: 0.7, //Transparansi tengah polygon
            color: "blue", //Warna garis tepi polygon
            weight: 3, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>NIB : </b>" +
                "<b>" +
                feature.properties.NIB +
                "</b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              HGU_UTMU.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Nomor SK : </td><td>" +
                feature.properties.No_SK +
                "</td></tr>" +
                "<tr><td>Luas Dokumen : </td><td>" +
                feature.properties.Luas_Doc +
                " Ha </td></tr>" +
                "<tr><td>Luas Pengukuran : </td><td>" +
                feature.properties.Luas_Ha +
                " Ha </td></tr>" +
                "<table>";
              HGU_UTMU.bindPopup(
                "<p><b>NIB :</b> " +
                  "<b>" +
                  feature.properties.NIB +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      
      /* memanggil data HGU */
      $.getJSON("geojson/FINAL_HGU.geojson", function (data) {
        HGU_UTMU.addData(data);
        // map.addLayer(HGU_UTMU); //HGU_UTMU ditampilkan ketika halaman dipanggil
      });

      /* KADASTRAL INTI */
      var KADASTRAL_INTI = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_KADASTRAL_INTI",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: "transparent", //Warna tengah polygon
            fillOpacity: 0.7, //Transparansi tengah polygon
            color: "#FE9929", //Warna garis tepi polygon
            weight: 3, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>NIB : </b>" +
                "<b>" +
                feature.properties.NIB +
                "</b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              KADASTRAL_INTI.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Nomor SK : </td><td>" +
                feature.properties.No_SK +
                "</td></tr>" +
                "<tr><td>Luas Dokumen : </td><td>" +
                feature.properties.Luas_Doc +
                " Ha </td></tr>" +
                "<tr><td>Luas Pengukuran : </td><td>" +
                feature.properties.Luas_Ha +
                " Ha </td></tr>" +
                "<table>";
              KADASTRAL_INTI.bindPopup(
                "<p><b>NIB :</b> " +
                  "<b>" +
                  feature.properties.NIB +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      /* memanggil data KADASTRAL INTI */
      $.getJSON("geojson/FINAL_KADASTRAL_INTI.geojson", function (data) {
        KADASTRAL_INTI.addData(data);
        // map.addLayer(KADASTRAL_INTI); //KADASTRAL_INTI ditampilkan ketika halaman dipanggil
      });

      /* KADASTRAL PLASMA */
      var KADASTRAL_PLASMA = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_KADASTRAL_PLASMA",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: "transparent", //Warna tengah polygon
            fillOpacity: 0.7, //Transparansi tengah polygon
            color: "#FEE391", //Warna garis tepi polygon
            weight: 3, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>NIB : </b>" +
                "<b>" +
                feature.properties.NIB +
                "</b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              KADASTRAL_PLASMA.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Nomor SK : </td><td>" +
                feature.properties.No_SK +
                "</td></tr>" +
                "<tr><td>Luas Dokumen : </td><td>" +
                feature.properties.Luas_Doc +
                " Ha </td></tr>" +
                "<tr><td>Luas Pengukuran : </td><td>" +
                feature.properties.Luas_Ha +
                " Ha </td></tr>" +
                "<table>";
              KADASTRAL_PLASMA.bindPopup(
                "<p><b>NIB :</b> " +
                  "<b>" +
                  feature.properties.NIB +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      /* memanggil data KADASTRAL PLASMA */
      $.getJSON("geojson/FINAL_KADASTRAL_PLASMA.geojson", function (data) {
        KADASTRAL_PLASMA.addData(data);
        // map.addLayer(KADASTRAL_PLASMA); //KADASTRAL_PLASMA ditampilkan ketika halaman dipanggil
      });

      /* KKPR */
      var KKPR = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_KKPR",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: "transparent", //Warna tengah polygon
            fillOpacity: 0.7, //Transparansi tengah polygon
            color: "#000", //Warna garis tepi polygon
            weight: 3, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>NIB : </b>" +
                "<b>" +
                feature.properties.NIB +
                "</b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              KKPR.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Nomor SK : </td><td>" +
                feature.properties.No_SK +
                "</td></tr>" +
                "<tr><td>Luas Dokumen : </td><td>" +
                feature.properties.Luas_Doc +
                " Ha </td></tr>" +
                "<tr><td>Luas Pengukuran : </td><td>" +
                feature.properties.Luas_Ha +
                " Ha </td></tr>" +
                "<table>";
              KKPR.bindPopup(
                "<p><b>NIB :</b> " +
                  "<b>" +
                  feature.properties.NIB +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      /* memanggil data KKPR */
      $.getJSON("geojson/FINAL_KKPR.geojson", function (data) {
        KKPR.addData(data);
        // map.addLayer(KKPR); //KKPR ditampilkan ketika halaman dipanggil
      });

      /* MASTER_BLOK */
      var BlockColors = {
        2012: "#a6cee3",
        2013: "#1f78b4",
        2014: "#b2df8a",
        2015: "#33a02c",
        2016: "#fb9a99",
        2017: "#e31a1c",
        2018: "#fdbf6f",
        2019: "#ff7f00",
        2020: "#cab2d6",
        2021: "#6a3d9a",
        2022: "#ffff99",
        2023: "#b15928",
        2024: "#8dd3c7",
        2025: "#ffffb3",
        2026: "#bebada",
        2027: "#fb8072",
        2028: "#80b1d3",
        2029: "#fdb462",
        2030: "#b3de69",
        2031: "#fccde5",
        2032: "#d9d9d9",
        2033: "#bc80bd",
        2034: "#ccebc5",
        2035: "#ffed6f",
      };
      var MASTER_BLOK = L.geoJson(null, {
        /* Style polygon */
        pane: "PANE_MASTER_BLOK",
        style: function (feature) {
          //Fungsi style polygon
          return {
            fillColor: BlockColors[feature.properties.t_tanam], //Warna tengah polygon
            fillOpacity: 0.4, //Transparansi tengah polygon
            color: "#000", //Warna garis tepi polygon
            weight: 0, //Tebal garis tepi polygon
            opacity: 1, //Transparansi garis tepi polygon
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis tepi polygon
                color: "#00FFFF", //Warna garis tepi polygon
                opacity: 1, //Transparansi garis tepi polygon
                fillColor: "yellow", //Warna tengah polygon
                fillOpacity: 0.5, //Transparansi tengah polygon
              });
              var content =
                "<p><b>Blok : </b>" +
                "<b>" +
                feature.properties.Blok +
                "<b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              MASTER_BLOK.resetStyle(e.target); //Mengembalikan style polygon ke style awal
              if (e.target.popup) {
                map.closePopup(e.target.popup); //Menutup popup
                e.target.popup = null;
              }
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Konsesi : </td><td>" +
                feature.properties.Konsesi +
                "</td></tr>" +
                "<tr><td>Alokasi : </td><td>" +
                feature.properties.Alokasi +
                "</td></tr>" +
                "<tr><td>Estate : </td><td>" +
                feature.properties.Estate +
                "</td></tr>" +
                "<tr><td>Divisi : </td><td>" +
                feature.properties.Divisi +
                "</td></tr>" +
                "<tr><td>Blok : </td><td>" +
                feature.properties.Blok +
                "</td></tr>" +
                "<tr><td>Tahun Tanam : </td><td>" +
                feature.properties.t_tanam +
                "</td></tr>" +
                "<tr><td>Status Tanam : </td><td>" +
                feature.properties.periode +
                "</td></tr>" +
                "<tr><td>Luas LC Real : </td><td>" +
                feature.properties.luas_real +
                " Ha </td></tr>" +
                "<tr><td>Luas LC Dokumen BAP : </td><td>" +
                feature.properties.luas +
                " Ha </td></tr>" +
                "<tr><td>Luas Tanam : </td><td>" +
                feature.properties.lpl_disp +
                " Ha </td></tr>" +
                "<tr><td>Luas Tanam Mekanis: </td><td>" +
                feature.properties.lpl_me_d +
                " Ha </td></tr>" +
                "<tr><td>Luas Tanam Manual: </td><td>" +
                feature.properties.lpl_nm_d +
                " Ha </td></tr>" +
                "<tr><td>Jumlah Pokok: </td><td>" +
                feature.properties.j_pokok +
                " Pokok </td></tr>" +
                "<tr><td>Jumlah Pokok Mekanisasi: </td><td>" +
                feature.properties.j_pokok_me +
                " Pokok </td></tr>" +
                "<tr><td>Jumlah Pokok Manual: </td><td>" +
                feature.properties.j_pokok_nm +
                " Pokok </td></tr>" +
                "<table>";
              MASTER_BLOK.bindPopup(
                "<p><b>Blok :</b> " +
                  "<b>" +
                  feature.properties.Blok +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
          // // Labeling
          // layer.bindTooltip(layer.feature.properties.Blok.toString(), {
          //   direction: "center",
          //   permanent: true,
          //   className: "styleLabel",
          // });
        },
      });
      /* memanggil data MASTER_BLOK */
      $.getJSON("geojson/FINAL_BLOK_ARESTA.geojson", function (data) {
        MASTER_BLOK.addData(data);
        map.addLayer(MASTER_BLOK); //MASTER_BLOK ditampilkan ketika halaman dipanggil
      });
      // //Reset labels//
      // resetLabels([MASTER_BLOK]);
      // map.on("move", function () {
      //   resetLabels([MASTER_BLOK]);
      // });
      // map.on("zoomend", function () {
      //   resetLabels([MASTER_BLOK]);
      // });
      // map.on("layeradd", function () {
      //   resetLabels([MASTER_BLOK]);
      // });
      // map.on("layerremove", function () {
      //   resetLabels([MASTER_BLOK]);
      // });

      /* Jalan */
      var RoadColors = {
        AR: "#996633",
        MR: "#ff0000",
        CR: "#ff9900",
        RR: "#800000",
        BR: "#808080",
      };
      var JALAN = L.geoJson(null, {
        /* Style polyline */
        pane: "PANE_JALAN",
        style: function (feature) {
          //Fungsi style polyline
          return {
            color: RoadColors[feature.properties.Road_Class], //Warna garis
            weight: 2, //Tebal garis
            opacity: 1, //Transparansi garis
          };
        },
        /* Highlight & Popup */
        onEachFeature: function (feature, layer) {
          layer.on({
            mouseover: function (e) {
              //Fungsi ketika mouse berada di atas obyek
              var layer = e.target; //variabel layer
              layer.setStyle({
                //Highlight style
                weight: 2, //Tebal garis
                color: "#00FFFF", //Warna garis
                opacity: 1, //Transparansi garis
              });
              var content =
                "<p><b>Kelas Jalan : </b>" +
                "<b>" +
                feature.properties.Road_Class +
                "<b>" +
                "</p>";
              e.target.popup = showPopup(e, content);
            },
            mouseout: function (e) {
              //Fungsi ketika mouse keluar dari area obyek
              JALAN.resetStyle(e.target); //Mengembalikan style garis ke style awal
              map.closePopup(); //Menutup popup
            },
            click: function (e) {
              //Fungsi ketika obyek di-klik
              var content =
                "<table class='table table-striped'>" +
                "<tr><td>Konsesi : </td><td>" +
                feature.properties.Konsesi +
                "</td></tr>" +
                "<tr><td>Alokasi : </td><td>" +
                feature.properties.Alokasi +
                "</td></tr>" +
                "<tr><td>Estate : </td><td>" +
                feature.properties.Estate +
                "</td></tr>" +
                "<tr><td>Divisi : </td><td>" +
                feature.properties.Divisi +
                "</td></tr>" +
                "<tr><td>Blok : </td><td>" +
                feature.properties.Blok +
                "</td></tr>" +
                "<tr><td>Panjang Jalan: </td><td>" +
                feature.properties.Panjang_M +
                " m </td></tr>" +
                "<table>";
              JALAN.bindPopup(
                "<p><b>Blok : </b>" +
                  "<b>" +
                  feature.properties.Blok +
                  "</b>" +
                  content +
                  "</p>"
              ).openPopup(); //Popup
            },
          });
        },
      });
      /* memanggil data geojson polyline */
      $.getJSON("geojson/FINAL_JALAN.geojson", function (data) {
        JALAN.addData(data);
        map.addLayer(JALAN); //JALAN ditampilkan ketika halaman dipanggil
      });

      /* Judul Peta */
      var title = new L.Control();
      title.onAdd = function (map) {
        this._div = L.DomUtil.create("div", "info");
        this.update();
        return this._div;
      };
      title.update = function () {
        this._div.innerHTML = "<h2>Peta Areal Statement</h2>PT. UTMU";
      };
      title.addTo(map);

      /* Control Layer */
      var baseMaps = {
        //list basemap
        "Open Street Map": OSM_Base,
        "ESRI Imagery": Esri_WorldImagery,
        "ESRI Shaded Relief": Esri_WorldShadedRelief,
      };
      var Layers = {
        //list layer
        "Hak Guna Usaha": HGU_UTMU,
        "KKPR / Izin Lokasi": KKPR,
        "Panitia B / Kadastral Inti": KADASTRAL_INTI,
        "Panitia B / Kadastral Plasma": KADASTRAL_PLASMA,
        "Master Blok": MASTER_BLOK,
        Jalan: JALAN,
      };
      var layerControl = L.control.layers(baseMaps, Layers, {
        collapsed: true, //collapse layer control
      });
      layerControl.addTo(map);

      /* Cursor's Coordinate */
      L.control
        .mousePosition({
          separator: ",",
          prefix: "Koordinat : ",
        })
        .addTo(map);

      /* Scale Bar */
      L.control
        .scale({
          maxWidth: 150,
          imperial: false,
        })
        .addTo(map);

      /* Watermark Logo */
      L.Control.Watermark = L.Control.extend({
        onAdd: function (map) {
          var img = L.DomUtil.create("img");
          img.src = "asset/logo/LOGO_UTMU.png"; //Image URL
          img.style.width = "50px"; //Image Size
          return img;
        },
        onRemove: function (map) {
          // Nothing to do here
        },
      });
      L.control.watermark = function (opts) {
        return new L.Control.Watermark(opts);
      };
      L.control.watermark({ position: "bottomright" }).addTo(map);

      /* Geolocation Positioning */
      var locateControl = L.control
        .locate({
          position: "topleft",
          drawCircle: true,
          follow: true,
          setView: true,
          keepCurrentZoomLevel: false,
          markerStyle: {
            weight: 1,
            opacity: 0.8,
            fillOpacity: 0.8,
          },
          circleStyle: {
            weight: 1,
            clickable: false,
          },
          icon: "fa fa-crosshairs",
          metric: true,
          strings: {
            title: "Klik untuk mengetahui lokasimu",
            popup: "Lokasimu sekarang di sini. Akurasi {distance} {unit}",
            outsideMapBoundsMsg: "Kamu berada di luar area peta",
          },
          locateOptions: {
            maxZoom: 15,
            watch: true,
            enableHighAccuracy: true,
            maximumAge: 10000,
            timeout: 10000,
          },
        })
        .addTo(map);

      /* Measurement */
      var measureControl = new L.Control.Measure({
        primaryLengthUnit: "meters",
        secondaryLengthUnit: "kilometers",
        primaryAreaUnit: "hectares",
        secondaryAreaUnit: "sqmeters",
        activeColor: "green",
        completedColor: "blue",
      });
      measureControl.addTo(map);
    </script>
  </body>
</html>
